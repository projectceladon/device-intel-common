##############################
#	 Mute & Unmute Steps
##############################

# Definition of Mute and Unmute for futur use in this supDomain
supDomain: Mute.HWCodec
	RoutageState Includes Flow

	supDomain: HWCodec.Playback
		domain: EarpieceIHF
			conf: Unmute
				OpenedPlaybackRoutes Includes HwCodec0IA

				/Audio/REALTEK/SOUND_CARD/OUTPUT/DIGITAL/DAC1/VOLUME/0/MUTED = 0
				/Audio/REALTEK/SOUND_CARD/OUTPUT/DIGITAL/DAC1/VOLUME/1/MUTED = 0

			conf: Mute
				/Audio/REALTEK/SOUND_CARD/OUTPUT/DIGITAL/DAC1/VOLUME/0/MUTED = 1
				/Audio/REALTEK/SOUND_CARD/OUTPUT/DIGITAL/DAC1/VOLUME/1/MUTED = 1

		domain: Headphones
			conf: Unmute
				OpenedPlaybackRoutes Includes HwCodec1IA
				ANY
					SelectedOutputDevice Includes Headset
					SelectedOutputDevice Includes Headphones

				/Audio/REALTEK/SOUND_CARD/OUTPUT/HEADPHONE/ANALOG/VOLUME/0/MUTED = 0
				/Audio/REALTEK/SOUND_CARD/OUTPUT/HEADPHONE/ANALOG/VOLUME/1/MUTED = 0
				/Audio/REALTEK/SOUND_CARD/OUTPUT/DIGITAL/MONO_DAC/VOLUME/0/MUTED = 0
				/Audio/REALTEK/SOUND_CARD/OUTPUT/DIGITAL/MONO_DAC/VOLUME/1/MUTED = 0

			conf: Mute
				/Audio/REALTEK/SOUND_CARD/OUTPUT/HEADPHONE/ANALOG/VOLUME/0/MUTED = 1
				/Audio/REALTEK/SOUND_CARD/OUTPUT/HEADPHONE/ANALOG/VOLUME/1/MUTED = 1
				/Audio/REALTEK/SOUND_CARD/OUTPUT/DIGITAL/MONO_DAC/VOLUME/0/MUTED = 1
				/Audio/REALTEK/SOUND_CARD/OUTPUT/DIGITAL/MONO_DAC/VOLUME/1/MUTED = 1

##############################
#	 Enable & Disable Steps
##############################

supDomain: Enable.HWCodec
	RoutageState Includes Path

	supDomain: Playback
		domain: EarpieceIHF
			conf: Enable
				OpenedPlaybackRoutes Includes HwCodec0IA
				ANY
					SelectedOutputDevice Includes IHF
					ALL
						SelectedOutputDevice Includes Earpiece
						HAC Is Off

				/Audio/REALTEK/SOUND_CARD/OUTPUT/SPEAKER/SWITCH = 1

			conf: Disable
				/Audio/REALTEK/SOUND_CARD/OUTPUT/SPEAKER/SWITCH = 0

		domain: Headphones
			conf: Enable
				OpenedPlaybackRoutes Includes HwCodec1IA
				ANY
					SelectedOutputDevice Includes Headset
					SelectedOutputDevice Includes Headphones

				/Audio/REALTEK/SOUND_CARD/OUTPUT/HEADPHONE/SWITCH = 1

			conf: Disable
				/Audio/REALTEK/SOUND_CARD/OUTPUT/HEADPHONE/SWITCH = 0

##############################
#	 Configure Step
##############################

supDomain: Configure.HWCodec
	RoutageState Includes Configure

	domain: Calibration
		conf: Default
			/Audio/REALTEK/SOUND_CARD/VOICE_PORT/CONFIG/FORMAT = S16LE
			/Audio/REALTEK/SOUND_CARD/VOICE_PORT/CONFIG/CHANNEL_NUMBER  = 2
			/Audio/REALTEK/SOUND_CARD/VOICE_PORT/CONFIG/SAMPLE_RATE = 48000

			### output
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/LEFT/IF_DAC1/SOURCE = IF1 DAC
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/RIGHT/IF_DAC1/SOURCE = IF1 DAC

			# headset
			# "DAC L2 Mux" "IF1 DAC"
			# "DAC R2 Mux" "IF1 DAC"
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/LEFT/L2/SOURCE = IF1 DAC
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/RIGHT/R2/SOURCE = IF1 DAC

			### input
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/AIF1/ADC1_IN1/SOURCE = IF_ADC1
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/AIF1/ADC1_IN2/SOURCE = IF1_ADC1_IN1
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/AIF1/ADC2_IN/SOURCE = IF_ADC2
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/AIF1/ADC2_IN1/SOURCE = IF1_ADC2_IN

			# dmic
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/STEREO1/STEREO/MUX_DMIC/SOURCE = DMIC1
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/STEREO1/STEREO/MUX_ADC2/LEFT/SOURCE = DMIC
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/STEREO1/STEREO/MUX_ADC2/RIGHT/SOURCE = DMIC

			# amic
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/MONO/LEFT/MUX_ADC1/SOURCE = ADC
			/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/MONO/RIGHT/MUX_ADC1/SOURCE = ADC

	supDomain: Playback
		# For now earpiece is unused
		domain: IHF
			conf: Enable
				ALL
					OpenedPlaybackRoutes Includes HwCodec0IA
					SelectedOutputDevice Includes IHF

				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/LEFT/IF_DAC1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/RIGHT/IF_DAC1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/LEFT/L1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/RIGHT/L1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/RIGHT/R1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/PDM/1/LEFT/MUX = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/PDM/1/RIGHT/MUX = 1

			conf: Disable
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/LEFT/IF_DAC1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/INTERFACE_MIXER/RIGHT/IF_DAC1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/LEFT/L1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/RIGHT/L1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/RIGHT/R1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/PDM/1/LEFT/MUX = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/PDM/1/RIGHT/MUX = 0

		domain: Headphones
			conf: Enable
				OpenedPlaybackRoutes Includes HwCodec1IA

				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/LEFT/L2/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/RIGHT/R2/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/HPOUT_VOL_MIXER/LEFT/DACL1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/HPOUT_VOL_MIXER/RIGHT/DACL1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/HPOUT_MIXER/HPVOL/SWITCH = 1

			conf: Disable
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/LEFT/L2/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/DAC_MIXER/STEREO/RIGHT/R2/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/HPOUT_VOL_MIXER/LEFT/DACL1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/HPOUT_VOL_MIXER/RIGHT/DACL1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/HPOUT_MIXER/HPVOL/SWITCH = 0

	supDomain: Capture
		domain: MainMic
			conf: Enable
				OpenedCaptureRoutes Includes HwCodec0IA

				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/STEREO1/LEFT/MUX_ADC2/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/STEREO1/RIGHT/MUX_ADC2/SWITCH = 1

			conf: Disable
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/STEREO1/LEFT/MUX_ADC2/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/STEREO1/RIGHT/MUX_ADC2/SWITCH = 0

		domain: Headset
			conf: Enable
				OpenedCaptureRoutes Includes HwCodec1IA
				SelectedInputDevice Includes Headset

				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/REC_MIXER/LEFT/BST1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/REC_MIXER/RIGHT/BST1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/MONO/LEFT/MUX_ADC1/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/MONO/RIGHT/MUX_ADC1/SWITCH = 1

			conf: Disable
				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/REC_MIXER/LEFT/BST1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/ANALOG/REC_MIXER/RIGHT/BST1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/MONO/LEFT/MUX_ADC1/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/MIXER/DIGITAL/ADC_MIXER/MONO/RIGHT/MUX_ADC1/SWITCH = 0

		domain: ADC
			conf: Capture
				ANY
					OpenedCaptureRoutes Includes HwCodec0IA
					OpenedCaptureRoutes Includes HwCodec1IA

				/Audio/REALTEK/SOUND_CARD/INPUT/DIGITAL/STEREO/ADC_CAPTURE_SWITCH = 1 1

			conf: Disable
				/Audio/REALTEK/SOUND_CARD/INPUT/DIGITAL/STEREO/ADC_CAPTURE_SWITCH = 0 0

		domain: AllMics
			conf: Headset
				OpenedCaptureRoutes Includes HwCodec1IA
				SelectedInputDevice Includes Headset

				/Audio/REALTEK/SOUND_CARD/INPUT/HEADSET/SWITCH = 1
				/Audio/REALTEK/SOUND_CARD/INPUT/MIC/INT/SWITCH = 0

			conf: MainMic
				OpenedCaptureRoutes Includes HwCodec0IA

				/Audio/REALTEK/SOUND_CARD/INPUT/HEADSET/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/INPUT/MIC/INT/SWITCH = 1

			conf: Disable
				/Audio/REALTEK/SOUND_CARD/INPUT/HEADSET/SWITCH = 0
				/Audio/REALTEK/SOUND_CARD/INPUT/MIC/INT/SWITCH = 0

